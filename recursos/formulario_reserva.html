<!DOCTYPE html>

<html lang="gl">
    <head>
        <meta charset="UTF-8" >
        <meta name="keywords" content="casa, rural, turismo, gastronomia" >
        <meta name="author" content="Juan Carlos Nieto García" >
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="A túa casa rural" >

        <title> Ruralia </title>
        <link rel="stylesheet" media=screen href="../css/bootstrap-grid.css">
        <link rel="stylesheet" media=screen href="../css/principal.css">
        <link rel="stylesheet" media=screen href="../css/formulario.css">
        <script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
        <script type="text/javascript" src="../js/popper.min.js"></script>
        <script type="text/javascript" src="../js/bootstrap.min.js"></script>

        <script>
            $(document).ready(function(){
                /* barra de navegación fixada ao desprazar */
                const sticky = $("#barra_navegacion").last().offset().top
                $(window).scroll(function(){
                    if ($(window).scrollTop() >= sticky) {
                        $("#barra_navegacion").addClass("sticky");
                    } else {
                        $("#barra_navegacion").removeClass("sticky");
                    }
                });

                $(window).resize(function(){
                    if ($(window).width() > 700 && $("nav > ul > li").css("display") == "none"){
                        $("nav > ul > li").css("display","block");
                    } else if ($(window).width() <= 700 && $("nav > ul > li").css("display") == "block"){
                        $("nav > ul > li").css("display","none");
                    }
                });

                $("#boton_menu").click(function(){
                    if ($("nav > ul > li").css("display") == "block" ){
                        $("nav > ul > li").css("display","none");
                    } else {
                        $("nav > ul > li").css("display","block");
                    }
                });

                
            });
        </script>
    </head> 

    <body class="container-fluid">
        <header class="row">
            <figure class="col-12 imaxe-cabeceira">
                <a href="../index.html">
                    <img src="../imaxes/logo.svg" alt="Logotipo Ruralia" width="256" height="65">
                </a>
            </figure>
            <nav class="col-12" id="barra_navegacion">
                <div class="menu-hamburguesa">
                    <a href="javascript:void(0);" id="boton_menu">
                    <figure class="imaxe-menu-hamburguesa">
                        <img src="../imaxes/menu_hamburguesa.svg" width="32">
                    </figure>
                    <h1>Menú</h1>
                    </a>
                </div>
                <ul class="menu-principal">
                    <li>
                        <a href="../index.html"> Sobre nós </a>
                    </li>
                    <li>
                        <a href="./instalacions.html">
                            Instalacións
                        </a>
                        <ul class="submenu">
                            <li> <a href="./historia.html"> Historia </a> </li>
                            <li> <a href="./vinha.html"> A viña </a> </li>
                            <li> <a href="./xardins.html"> Xardíns </a> </li>
                            <li> <a href="./lareira.html"> Lareira </a> </li>
                            <li> <a href="./comedor.html"> Comedor </a> </li>
                            <li> <a href="./habitacions.html"> Habitacións </a> </li>
                        </ul>
                    </li>
                    <li>
                        <a href="./gastronomia.html">
                            Gastronomía
                        </a>
                        <ul class="submenu">
                            <li> <a href="./comida.html"> Comida </a> </li>
                            <li> <a href="./bebida.html"> Bebida </a> </li>
                        </ul>
                    </li>
                    <li>
                        <a href="./lecer.html">
                            Lecer
                        </a>
                    </li>
                    <li>
                        <form action="../compra" method="POST" name="entrarTenda" class="form-tenda">
                            <input type="hidden" id="opcion" name="opcion" value="iniciarCompra">
                            <input type="submit" id="submit" name="submit" value="Tenda">
                        </form>
                    </li>
                    <li id="li_info" >
                        <a href="./contacto.html">
                            Contacto
                        </a>
                        <ul class="submenu">
                            <li> <a href="./info_contacto.html"> Horarios e teléfono </a> </li>
                            <li> <a href="./formulario_reserva.html"> Dar de alta</a> </li>
                            <li> <a href="./modificar_reserva.html"> Rexistro </a> </li>
                            <li> <a href="./login.html"> Login </a> </li>
                        </ul>   
                    </li>
                </ul>
            </nav>
        </header>

        <section class="row">
            <h1 class="col-12 titulo"> Dar de alta </h1> 
            <article class="col-sm-10 col-md-10 artigo">
                <h2> Cubra o seguinte formulario </h2>
                <form action="../servletdaw" method="POST" name="rexistro" onsubmit="return validar();">
                    <label for="nome">Nome</label>
                    <input type="text" name="nome" id="in_nome" placeholder="Escribe un nome..." required autofocus>

                    <label for="apelidos">Apelidos</label>
                    <input type="text" name="apelidos" id="in_apelidos" placeholder="Escribe os apelidos..." required>

                    <label for="email">Email</label>
                    <input type="email" name="email" id="in_email" placeholder="Escribe un email (nome@dominio.com)..." required>

                    <label for="dni">DNI/NIF</label>
                    <input type="text" name="dni" id="in_dni" placeholder="Escribe un DNI (00000000A)..." required>

                    <label for="estado_civil">Estado civil</label>
                    <select name="estado_civil" id="in_estado_civil" required>
                        <option value="">Seleccione unha...</option>
                        <option value="solteiro">Solteiro/Solteira</option>
                        <option value="casado">Casado/Casada</option>
                        <option value="divorciado">Divorciado/Divorciada</option>
                        <option value="viuvo">Viuvo/Viuva</option>
                    </select>

                    <label for="data_nacemento">Data de nacemento</label>
                    <input type="date" name="data_nacemento" id="in_data_nacemento" required>

                    <label for="provincia">Provincia</label>
                    <input type="text" name="provincia" id="in_provincia" required>

                    <label for="direccion">Dirección</label>
                    <input type="text" name="direccion" id="in_direccion" required>

                    <label for="codigo_postal">Código postal</label>
                    <input type="text" name="codigo_postal" id="in_codigo_postal" required>

                    <label for="numero_telefono">Teléfono de contacto</label>
                    <input type="tel" name="numero_telefono" id="in_numero_telefono" required>

                    <input type="reset" name="reset" id="reset" value="Borrar todo">
                    <input type="submit" id="submit" name="submit" value="Dar de alta">
                </form>
            </article>  
        </section>

        <section class="row">
            <footer class="col-md-12 col-sm-12 pe-paxina">
                <h1> Síguenos nas nosas redes sociais!</h1>
                
                <p id="p_redes">
                    <a href="https://www.facebook.com/ruralia/"><img src="../imaxes/facebook.png" title="Facebook" width="32" height="32"></a>  
                    <a href="https://www.twitter.com/ruralia/"><img src="../imaxes/twitter.png" title="Twitter" width="32" height="32"></a>
                    <a href="https://www.instagram.com/ruralia/"><img src="../imaxes/instagram.png" title="Instagram" width="32" height="32"></a>
                </p>
                    
                <p class="font-italic"> Ruralia © - Tódolos dereitos reservados </p>
            </footer>
        </section>
        <script>
            function validar() {
                var nome, apelido, email, dni, estadoCivil, dataNacemento, provincia, direccion, codigoPostal, numTelefono;
                var exp_nome, exp_email, exp_dni, exp_cod, exp_tel;

                nome = document.forms["rexistro"]["nome"].value;
                apelido = document.forms["rexistro"]["apelidos"].value;
                email = document.forms["rexistro"]["email"].value;
                dni = document.forms["rexistro"]["dni"].value;
                estadoCivil = document.forms["rexistro"]["estado_civil"].value;
                dataNacemento = document.forms["rexistro"]["data_nacemento"].value;
                provincia = document.forms["rexistro"]["provincia"].value;
                direccion = document.forms["rexistro"]["direccion"].value;
                codigoPostal = document.forms["rexistro"]["codigo_postal"].value;
                numTelefono = document.forms["rexistro"]["numero_telefono"].value;

                exp_nome = /^[A-Za-z\s]+$/i
                exp_email = /^[a-z0-9\-\.]+@[a-z0-9\-\.]+\.[a-z]{2,}$/i
                exp_dni = /^[0-9]{8}[A-Z]$/i
    

                if (nome === "" || apelido === "" || email === "" || dni === "" || estadoCivil === "" || provincia === "" ||
                    direccion === "" || codigoPostal === "" || numTelefono === "") {
                    alert("Tódolos campos son obrigatorios");
                    return false;
                
                } else if (nome.length > 40 ) {
                    alert("O nome é demasiado longo.");
                    return false;
                
                } else if (apelido.length > 40 ) {
                    alert("Os apelidos son demasiado longos.");
                    return false;
                
                } else if (email.length > 40 ) {
                    alert("O correo electrónico é demasiado longo.");
                    return false;

                } else if (dni.length != 9 ) { 
                    alert("O DNI non ten nove caracteres.");
                    return false;

                } else if (provincia.length > 22 || provincia.length < 4 ) {
                    alert("Non existe unha provincia con ese número de caracteres.");
                    return false;

                } else if (direccion.length > 40 ){
                    alert("Direccion demasiado longa.");
                    return false;

                } else if (codigoPostal.length != 5 ){
                    alert("Lonxitude incorrecta do código postal.");
                    return false;

                } else if (numTelefono.length != 9 ) {
                    alert("Lonxitude incorrecta do número de teléfono.");
                    return false;
                
                } else if (!exp_nome.test(nome) || !exp_nome.test(apelido)) {
                    alert("Non pode haber números nos nomes ou apelidos.");
                    return false;
                
                } else if (!exp_dni.test(dni)){
                    alert("Formato de DNI incorrecto.");
                    return false;

                } else if (!exp_nome.test(provincia)){
                    alert("Non pode haber números nos nomes de provincias");
                    return false;

                } else if (isNaN(numTelefono)){
                    alert("Debe proporcionar un número de teléfono válido.");
                    return false;

                } else if (isNaN(codigoPostal)){
                    alert("Debe proporcionar un código postal válido.");
                    return false;
                
                } else if (!exp_email.test(email)){
                    alert("Non proporcionou unha dirección de correo válida.");
                    return false;
                }

                return true;
            }
        </script>
    </body>
</html>
    
    